function onBeforeUnload(e){return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function addUnloadListener(){window.addEventListener("beforeunload",onBeforeUnload,{capture:!0})}function removeUnloadListener(){window.removeEventListener("beforeunload",onBeforeUnload,{capture:!0})}const $form=document.getElementById("form");if($form){$form.querySelectorAll("input,select,textarea").forEach((e=>{e.addEventListener("keyup",addUnloadListener),e.addEventListener("change",addUnloadListener)})),$form.addEventListener("submit",removeUnloadListener)}const clouds=document.querySelectorAll(".cloud");function Confirmable(e){e.addEventListener("submit",(e=>{const t=e.target.getAttribute("data-confirmable");return!!window.confirm(t)||(e.preventDefault(),!1)}),!0)}function initConfirmable(){document.querySelectorAll("[data-confirmable]").forEach((e=>{Confirmable(e)}))}function debounce(e,t,a){let r;return function(){const o=this,n=arguments,l=function(){r=null,a||e.apply(o,n)},i=a&&!r;clearTimeout(r),r=setTimeout(l,t),i&&e.apply(o,n)}}function Filterable(e){const t=e.querySelectorAll("[data-filterable-input]"),a=e.querySelectorAll("[data-filterable-item]"),r=document.querySelector("[data-filterable-num]"),o=r?parseInt(r.innerText.replace(",",""),10):a.length,n=()=>{const t=e.querySelectorAll('[data-filterable-item]:not([data-filter-hide^="("])').length;(e=>{r.innerText=e!==o&&e<o?`${e.toLocaleString()} of ${o.toLocaleString()}`:o.toLocaleString()})(t),t<=0?e.classList.add("no-results"):e.classList.remove("no-results")},l=e=>e.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['’.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"),i=e=>e.getAttribute("data-value")?e.getAttribute("data-value"):l(e.innerText),c=e=>{const t=e.target,r=t.getAttribute("data-filterable-input"),o=t.getAttribute("data-filterable-exact"),c=l(t.value);a.forEach((e=>{const t=e.querySelector(`[data-key="${r}"]`);!c||t&&(o?i(t)===c:i(t).indexOf(c)>-1)?((e,t)=>{const a=e.getAttribute("data-filter-hide")||"";e.setAttribute("data-filter-hide",a.replace(`(${t})`,""))})(e,r):((e,t)=>{const a=e.getAttribute("data-filter-hide")||"";a.includes(`(${t})`)||e.setAttribute("data-filter-hide",`${a}(${t})`)})(e,r)})),n()};t.forEach((e=>{e.addEventListener("keyup",debounce(c,100)),e.addEventListener("change",c),e.value&&c({target:e})}))}function initFilterable(){document.querySelectorAll("[data-filterable-list]").forEach((e=>{Filterable(e)}))}clouds.forEach((e=>{const t=e.querySelectorAll(".cloud__num");let a=0;t.forEach((e=>{const t=parseInt(e.innerText,10);t>a&&(a=t)}));t.forEach((e=>{const t=parseInt(e.innerText,10);if(t){const r=Math.log(t)/Math.log(a)*14+10;e.closest("li").style.fontSize=`${r}px`}}))})),initConfirmable(),initFilterable();const graphs=document.querySelectorAll(".graph");function Password(e){e.addEventListener("click",(t=>{const a=t.target.closest(".password-container").querySelector(".password-input");"password"===a.getAttribute("type")?(a.setAttribute("type","text"),a.setAttribute("aria-label","Hide Password"),e.innerText="Hide"):(a.setAttribute("type","password"),a.setAttribute("aria-label","Show Password"),e.innerText="Show")}))}function initPassword(){document.querySelectorAll("[data-toggle-password]").forEach((e=>{Password(e)}))}function Slugable(e){const t=e.getAttribute("data-slug").split(","),a=document.querySelectorAll(t),r=()=>{e.value=(()=>{const e=[];return a.forEach((t=>{"end_release_year"===t.name&&t.value===e.at(-1)||e.push(t.value)})),e.join("-").toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['’.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-")})()};Array.from(a).forEach((e=>{e.addEventListener("keyup",r)}))}function initSlugable(){document.querySelectorAll("[data-slug]").forEach((e=>{Slugable(e)}))}function Sortable(e){let t=[],a=e.getAttribute("data-sortable-default-key"),r=e.getAttribute("data-sortable-default-dir")?e.getAttribute("data-sortable-default-dir"):"asc";const o=e.querySelectorAll("[data-sortable-key]"),n=e.querySelector("[data-sortable-container]"),l=e.querySelectorAll("[data-sortable-item]"),i=e=>{const o=`sortable-button--${r}`;Array.from(document.getElementsByClassName(o)).forEach((e=>{e.classList.remove(o)}));const l=e.target,i=l.getAttribute("data-sortable-key");r=i===a?"desc"===r?"asc":"desc":"asc",l.classList.add(`sortable-button--${r}`),(e=>{t=t.sort(((t,a)=>""===t[e]&&""!==a[e]?1:""!==t[e]&&""===a[e]?-1:t[e]===a[e]?0:"desc"===r?t[e]<a[e]?1:-1:t[e]<a[e]?-1:1))})(i),n.innerText="",t.forEach((e=>{n.appendChild(e.row)})),a=i};(()=>{l.forEach((e=>{const a={row:e};e.querySelectorAll("td").forEach((e=>{const t=e.getAttribute("data-key"),r=e.getAttribute("data-sortable-value")||e.getAttribute("data-value")||e.innerText.trim();a[t]=r})),t.push(a)})),o.forEach((e=>{e.addEventListener("click",i)}));e.querySelector(`[data-sortable-key="${a}"]`).classList.add(`sortable-button--${r}`)})()}function initSortable(){document.querySelectorAll("[data-sortable-list]").forEach((e=>{Sortable(e)}))}function showHideByType(){const e=document.getElementById("type").value;document.querySelectorAll("[data-show-for-type]").forEach((t=>{t.getAttribute("data-show-for-type").split(",").includes(e)?t.style.display="":t.style.display="none"}))}function initShowForType(){const e=document.getElementById("type");e&&(e.addEventListener("change",showHideByType),showHideByType())}graphs.forEach((e=>{const t=e.querySelectorAll(".graph__bar"),a=t[0].clientHeight;let r=0;t.forEach((e=>{const t=parseInt(e.innerText,10);e.innerText&&t>r&&(r=t)})),t.forEach((e=>{if(e.innerText){const t=parseInt(e.innerText,10);e.style.height=t/r*a+"px"}else e.style.height=0}))})),initPassword(),initSlugable(),initSortable(),initShowForType();