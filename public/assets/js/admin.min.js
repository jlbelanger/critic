(()=>{var e={8248:()=>{function e(e){return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function t(){window.addEventListener("beforeunload",e,{capture:!0})}var n;(n=document.getElementById("form"))&&(n.querySelectorAll("input,select,textarea").forEach((function(e){e.addEventListener("keyup",t),e.addEventListener("change",t)})),n.addEventListener("submit",(function(){window.removeEventListener("beforeunload",e,{capture:!0})})))},8060:()=>{document.querySelectorAll("[data-confirmable]").forEach((function(e){var t;t=function(e){var t=e.target.getAttribute("data-confirmable");return!!window.confirm(t)||(e.preventDefault(),!1)},e.addEventListener("submit",t,!0)}))},9570:()=>{(new function(){var e=document.body,t=document.getElementById("menu-button"),n=function(){e.classList.remove("open-menu")},a=function(){e.classList.contains("open-menu")?n():e.classList.add("open-menu")},r=function(e){"Escape"===e.key&&n()};this.init=function(){t&&(t.addEventListener("click",a),document.addEventListener("keyup",r))}}).init()},5544:()=>{function e(){var e=document.getElementById("type").value;document.querySelectorAll("[data-show-for-type]").forEach((function(t){t.getAttribute("data-show-for-type").split(",").includes(e)?t.style.display="":t.style.display="none"}))}var t;(t=document.getElementById("type"))&&(t.addEventListener("change",e),e())}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(()=>{"use strict";const e=function(e){return e?e.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['â€™.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"):""};function t(t){var n,a,r,o=t.getAttribute("data-autocomplete"),u=t.getAttribute("data-autocomplete-name"),l=t.querySelector(".autocomplete__input"),i=t.querySelector(".autocomplete__clear"),c=t.querySelector(".autocomplete__results"),s=t.querySelector(".autocomplete__results-list"),d=t.querySelector(".autocomplete__results-none"),p=t.querySelector(".autocomplete__selected-list"),f=window.AUTOCOMPLETE_SELECTED,m="",v=null,y=!1,b=function(){c.style.display="none",s.innerText=""},E=function(){t.classList.remove("clearable")},A=function(e){var t=e.target.getAttribute("data-id");e.target.closest("li").remove(),l.focus();var n=f.findIndex((function(e){return e.id===t}));n>-1&&(f.splice(n,1),f.length<=0&&(p.style.display="none"))},g=function(e){var t=document.createElement("li");t.setAttribute("class","autocomplete__selected-item");var n=document.createElement("input");n.setAttribute("name","".concat(u,"[]")),n.setAttribute("type","hidden"),n.setAttribute("value",e.id),t.appendChild(n);var a=document.createElement("a");a.setAttribute("class","autocomplete__selected-link"),a.setAttribute("href",e.url),a.innerText=e.title,t.appendChild(a);var r=document.createElement("button");r.setAttribute("class","autocomplete__selected-button"),r.setAttribute("data-id",e.id),r.setAttribute("type","button"),r.addEventListener("click",A),r.innerText="Remove",t.appendChild(r),p.appendChild(t),p.style.display="",l.value="",m="",b(),E()},h=function(e){var t=e.target;"BUTTON"!==t.tagName&&(t=t.closest("button"));var n={id:t.getAttribute("data-id"),url:t.getAttribute("data-url"),title:t.innerText};f.push(n),g(n),l.focus()},L=function(e){document.querySelector("[data-selected]").removeAttribute("data-selected");var t=e.target.closest(".autocomplete__results-item");t.setAttribute("data-selected",1),v=parseInt(t.getAttribute("data-index"),10)},_=function(e){y||(y=!0,t.classList.add("loading"),fetch("".concat(o).concat(e)).then((function(e){return e.json()})).then((function(e){t.classList.remove("loading");var n=!1,a=0;s.innerText="",e.items.forEach((function(e){if(!(f.findIndex((function(t){return t.id===e.id}))>-1)){var t=function(e,t){var n=document.createElement("li");n.setAttribute("class","autocomplete__results-item"),n.setAttribute("data-index",e),0===e&&(n.setAttribute("data-selected",1),v=e);var a=document.createElement("button");return a.setAttribute("class","autocomplete__results-button"),a.setAttribute("data-id",t.id),a.setAttribute("data-url",t.url),a.setAttribute("type","button"),a.innerText=t.title,a.addEventListener("click",h),a.addEventListener("mouseover",L),n.appendChild(a),n}(a,e);s.appendChild(t),a+=1,n=!0}})),c.style.display="",n?(d.style.display="none",s.style.display="",s.firstChild.scrollIntoView({block:"nearest"})):(d.style.display="",s.style.display="none"),y=!1})))},w=function(){var n=e(l.value);n?(t.classList.add("clearable"),n!==m&&(m=n,_(n))):(E(),m="",b())},k=function(){return"none"!==c.style.display};document.addEventListener("keyup",(function(e){if(k()){var t=document.querySelector("[data-selected]");"Enter"===e.key?t&&(e.preventDefault(),h({target:t.querySelector("button")})):"ArrowDown"===e.key?(t.removeAttribute("data-selected"),v>=s.querySelectorAll("li").length-1?v=0:v+=1,(t=s.querySelector('[data-index="'.concat(v,'"]'))).setAttribute("data-selected",1),t.scrollIntoView({block:"nearest"})):"ArrowUp"===e.key?(t.removeAttribute("data-selected"),v>0?v-=1:v=s.querySelectorAll("li").length-1,(t=s.querySelector('[data-index="'.concat(v,'"]'))).setAttribute("data-selected",1),t.scrollIntoView({block:"nearest"})):"Escape"===e.key&&(b(),e.stopPropagation())}}),{capture:!0}),l.addEventListener("keydown",(function(e){"Enter"===e.key&&l.value&&e.preventDefault()})),l.addEventListener("keyup",(n=w,250,function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var u=this,l=function(){r=null,n.apply(u,t)},i=a;clearTimeout(r),r=setTimeout(l,250),i&&n.apply(u,t)})),l.addEventListener("focus",(function(){var t=e(l.value);t&&!k()&&_(t)})),i.addEventListener("click",(function(){l.value="",w(),l.focus()})),f.length>0&&f.forEach((function(e){g(e)}))}function a(t){var n=t.getAttribute("data-slug").split(","),a=document.querySelectorAll(n),r=function(){var n;t.value=(n=[],a.forEach((function(e){"end_release_year"===e.name&&e.value===n.at(-1)||n.push(e.value)})),e(n.join("-")))};Array.from(a).forEach((function(e){e.addEventListener("keyup",r)}))}document.querySelectorAll("[data-autocomplete]").forEach((function(e){t(e)})),n(8248),n(8060),n(9570),document.querySelectorAll("[data-slug]").forEach((function(e){a(e)})),n(5544)})()})();
