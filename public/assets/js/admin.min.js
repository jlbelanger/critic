(()=>{var e={8248:()=>{function e(e){return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function t(){window.addEventListener("beforeunload",e,{capture:!0})}var n;(n=document.getElementById("form"))&&(n.querySelectorAll("input,select,textarea").forEach((function(e){e.addEventListener("keyup",t),e.addEventListener("change",t)})),n.addEventListener("submit",(function(){window.removeEventListener("beforeunload",e,{capture:!0})})))},8060:()=>{document.querySelectorAll("[data-confirmable]").forEach((function(e){var t;t=function(e){var t=e.target.getAttribute("data-confirmable");return!!window.confirm(t)||(e.preventDefault(),!1)},e.addEventListener("submit",t,!0)}))},9570:()=>{(new function(){var e=document.body,t=document.getElementById("menu-button"),n=function(){e.classList.remove("open-menu")},a=function(){e.classList.contains("open-menu")?n():e.classList.add("open-menu")},r=function(e){"Escape"===e.key&&n()};this.init=function(){t&&(t.addEventListener("click",a),document.addEventListener("keyup",r))}}).init()},5544:()=>{function e(){var e=document.getElementById("type").value;document.querySelectorAll("[data-show-for-type]").forEach((function(t){t.getAttribute("data-show-for-type").split(",").includes(e)?t.style.display="":t.style.display="none"}))}var t;(t=document.getElementById("type"))&&(t.addEventListener("change",e),e())}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(()=>{"use strict";var e=void 0;const t=function(e){return e?e.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['â€™.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"):""};function a(n){var a=n.getAttribute("data-autocomplete"),r=n.getAttribute("data-autocomplete-name"),o=n.querySelector(".autocomplete__input"),u=n.querySelector(".autocomplete__clear"),l=n.querySelector(".autocomplete__results"),i=n.querySelector(".autocomplete__results-list"),c=n.querySelector(".autocomplete__results-none"),s=n.querySelector(".autocomplete__selected-list"),d=window.AUTOCOMPLETE_SELECTED,p="",f=null,v=!1,m=function(){l.style.display="none",i.innerText=""},y=function(){n.classList.remove("clearable")},b=function(e){var t=e.target.getAttribute("data-id");e.target.closest("li").remove(),o.focus();var n=d.findIndex((function(e){return e.id===t}));n>-1&&(d.splice(n,1),d.length<=0&&(s.style.display="none"))},E=function(e){var t=document.createElement("li");t.setAttribute("class","autocomplete__selected-item");var n=document.createElement("input");n.setAttribute("name","".concat(r,"[]")),n.setAttribute("type","hidden"),n.setAttribute("value",e.id),t.appendChild(n);var a=document.createElement("a");a.setAttribute("class","autocomplete__selected-link"),a.setAttribute("href",e.url),a.innerText=e.title,t.appendChild(a);var u=document.createElement("button");u.setAttribute("class","autocomplete__selected-button"),u.setAttribute("data-id",e.id),u.setAttribute("type","button"),u.addEventListener("click",b),u.innerText="Remove",t.appendChild(u),s.appendChild(t),s.style.display="",o.value="",p="",m(),y()},A=function(e){var t=e.target;"BUTTON"!==t.tagName&&(t=t.closest("button"));var n={id:t.getAttribute("data-id"),url:t.getAttribute("data-url"),title:t.innerText};d.push(n),E(n),o.focus()},g=function(e){document.querySelector("[data-selected]").removeAttribute("data-selected");var t=e.target.closest(".autocomplete__results-item");t.setAttribute("data-selected",1),f=parseInt(t.getAttribute("data-index"),10)},h=function(e){v||(v=!0,n.classList.add("loading"),fetch("".concat(a).concat(e)).then((function(e){return e.json()})).then((function(e){n.classList.remove("loading");var t=!1,a=0;i.innerText="",e.items.forEach((function(e){if(!(d.findIndex((function(t){return t.id===e.id}))>-1)){var n=function(e,t){var n=document.createElement("li");n.setAttribute("class","autocomplete__results-item"),n.setAttribute("data-index",e),0===e&&(n.setAttribute("data-selected",1),f=e);var a=document.createElement("button");return a.setAttribute("class","autocomplete__results-button"),a.setAttribute("data-id",t.id),a.setAttribute("data-url",t.url),a.setAttribute("type","button"),a.innerText=t.title,a.addEventListener("click",A),a.addEventListener("mouseover",g),n.appendChild(a),n}(a,e);i.appendChild(n),a+=1,t=!0}})),l.style.display="",t?(c.style.display="none",i.style.display="",i.firstChild.scrollIntoView({block:"nearest"})):(c.style.display="",i.style.display="none"),v=!1})))},L=function(){var e=t(o.value);e?(n.classList.add("clearable"),e!==p&&(p=e,h(e))):(y(),p="",m())},_=function(){return"none"!==l.style.display};document.addEventListener("keyup",(function(e){if(_()){var t=document.querySelector("[data-selected]");"Enter"===e.key?t&&(e.preventDefault(),A({target:t.querySelector("button")})):"ArrowDown"===e.key?(t.removeAttribute("data-selected"),f>=i.querySelectorAll("li").length-1?f=0:f+=1,(t=i.querySelector('[data-index="'.concat(f,'"]'))).setAttribute("data-selected",1),t.scrollIntoView({block:"nearest"})):"ArrowUp"===e.key?(t.removeAttribute("data-selected"),f>0?f-=1:f=i.querySelectorAll("li").length-1,(t=i.querySelector('[data-index="'.concat(f,'"]'))).setAttribute("data-selected",1),t.scrollIntoView({block:"nearest"})):"Escape"===e.key&&(m(),e.stopPropagation())}}),{capture:!0}),o.addEventListener("keydown",(function(e){"Enter"===e.key&&o.value&&e.preventDefault()})),o.addEventListener("keyup",function(t,n,a){for(var r=arguments.length,o=new Array(r>3?r-3:0),u=3;u<r;u++)o[u-3]=arguments[u];var l;return function(){var r=e,u=a&&!l;clearTimeout(l),l=setTimeout((function(){l=null,a||t.apply(r,o)}),n),u&&t.apply(r,o)}}(L,250)),o.addEventListener("focus",(function(){var e=t(o.value);e&&!_()&&h(e)})),u.addEventListener("click",(function(){o.value="",L(),o.focus()})),d.length>0&&d.forEach((function(e){E(e)}))}document.querySelectorAll("[data-autocomplete]").forEach((function(e){a(e)})),n(8248),n(8060),n(9570),document.querySelectorAll("[data-slug]").forEach((function(e){!function(e){var n=e.getAttribute("data-slug").split(","),a=document.querySelectorAll(n),r=function(){var n;e.value=(n=[],a.forEach((function(e){"end_release_year"===e.name&&e.value===n.at(-1)||n.push(e.value)})),t(n.join("-")))};Array.from(a).forEach((function(e){e.addEventListener("keyup",r)}))}(e)})),n(5544)})()})();
