(()=>{var e={8248:()=>{function e(e){return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave the page?"}function t(){window.addEventListener("beforeunload",e,{capture:!0})}var n;(n=document.getElementById("form"))&&(n.querySelectorAll("input,select,textarea").forEach((function(e){e.addEventListener("keyup",t),e.addEventListener("change",t)})),n.addEventListener("submit",(function(){window.removeEventListener("beforeunload",e,{capture:!0})})))},9570:()=>{(new function(){var e=document.body,t=document.getElementById("menu-button"),n=function(){e.classList.remove("open-menu")},a=function(){e.classList.contains("open-menu")?n():e.classList.add("open-menu")},r=function(e){"Escape"===e.key&&n()};this.init=function(){t&&(t.addEventListener("click",a),document.addEventListener("keyup",r))}}).init()},4133:()=>{function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return n=n||"0",(e=e.toString()).length>=t?e:new Array(t-e.length+1).join(n)+e}var t;(t=document.querySelector('[data-action="today"]'))&&t.addEventListener("click",(function(){var t=new Date,n="".concat(t.getFullYear(),"-").concat(e(t.getMonth()+1),"-").concat(e(t.getDate()));document.getElementById("start_date").value=n}))},5544:()=>{function e(){var e=document.getElementById("type").value;document.querySelectorAll("[data-show-for-type]").forEach((function(t){t.getAttribute("data-show-for-type").split(",").includes(e)?t.style.display="":t.style.display="none"}))}var t;(t=document.getElementById("type"))&&(t.addEventListener("change",e),e())}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}(()=>{"use strict";const e=function(e){return e?e.toLowerCase().replace(/ & /g,"-and-").replace(/<[^>]+>/g,"").replace(/['â€™.]/g,"").replace(/[^a-z0-9-]+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/--+/g,"-"):""};function t(t){var n,a,r,o=t.getAttribute("data-autocomplete"),c=t.getAttribute("data-autocomplete-name"),l=t.querySelector(".autocomplete__input"),u=t.querySelector(".autocomplete__clear"),i=t.querySelector(".autocomplete__results"),s=t.querySelector(".autocomplete__results-list"),d=t.querySelector(".autocomplete__results-none"),p=t.querySelector(".autocomplete__selected-list"),m=window.AUTOCOMPLETE_SELECTED,v="",f=null,y=!1,b=function(){i.style.display="none",s.innerText=""},g=function(){t.classList.remove("clearable")},E=function(e){var t=e.target.getAttribute("data-id");e.target.closest("li").remove(),l.focus();var n=m.findIndex((function(e){return e.id===t}));n>-1&&(m.splice(n,1),m.length<=0&&(p.style.display="none"))},A=function(e){var t=document.createElement("li");t.setAttribute("class","autocomplete__selected-item");var n=document.createElement("input");n.setAttribute("name","".concat(c,"[]")),n.setAttribute("type","hidden"),n.setAttribute("value",e.id),t.appendChild(n);var a=document.createElement("a");a.setAttribute("class","autocomplete__selected-link"),a.setAttribute("href",e.url),a.innerText=e.title,t.appendChild(a);var r=document.createElement("button");r.setAttribute("class","autocomplete__selected-button"),r.setAttribute("data-id",e.id),r.setAttribute("type","button"),r.addEventListener("click",E),r.innerText="Remove",t.appendChild(r),p.appendChild(t),p.style.display="",l.value="",v="",b(),g()},h=function(e){var t=e.target;"BUTTON"!==t.tagName&&(t=t.closest("button"));var n={id:t.getAttribute("data-id"),url:t.getAttribute("data-url"),title:t.innerText};m.push(n),A(n),l.focus()},L=function(e){document.querySelector("[data-selected]").removeAttribute("data-selected");var t=e.target.closest(".autocomplete__results-item");t.setAttribute("data-selected",1),f=parseInt(t.getAttribute("data-index"),10)},_=function(e){y||(y=!0,t.classList.add("loading"),fetch("".concat(o).concat(e)).then((function(e){return e.json()})).then((function(e){t.classList.remove("loading");var n=!1,a=0;s.innerText="",e.items.forEach((function(e){if(!(m.findIndex((function(t){return t.id===e.id}))>-1)){var t=function(e,t){var n=document.createElement("li");n.setAttribute("class","autocomplete__results-item"),n.setAttribute("data-index",e),0===e&&(n.setAttribute("data-selected",1),f=e);var a=document.createElement("button");return a.setAttribute("class","autocomplete__results-button"),a.setAttribute("data-id",t.id),a.setAttribute("data-url",t.url),a.setAttribute("type","button"),a.innerText=t.title,a.addEventListener("click",h),a.addEventListener("mouseover",L),n.appendChild(a),n}(a,e);s.appendChild(t),a+=1,n=!0}})),i.style.display="",n?(d.style.display="none",s.style.display="",s.firstChild.scrollIntoView({block:"nearest"})):(d.style.display="",s.style.display="none"),y=!1})))},k=function(){var n=e(l.value);n?(t.classList.add("clearable"),n!==v&&(v=n,_(n))):(g(),v="",b())},w=function(){return"none"!==i.style.display};document.addEventListener("keyup",(function(e){if(w()){var t=document.querySelector("[data-selected]");"Enter"===e.key?t&&(e.preventDefault(),h({target:t.querySelector("button")})):"ArrowDown"===e.key?(t.removeAttribute("data-selected"),f>=s.querySelectorAll("li").length-1?f=0:f+=1,(t=s.querySelector('[data-index="'.concat(f,'"]'))).setAttribute("data-selected",1),t.scrollIntoView({block:"nearest"})):"ArrowUp"===e.key?(t.removeAttribute("data-selected"),f>0?f-=1:f=s.querySelectorAll("li").length-1,(t=s.querySelector('[data-index="'.concat(f,'"]'))).setAttribute("data-selected",1),t.scrollIntoView({block:"nearest"})):"Escape"===e.key&&(b(),e.stopPropagation())}}),{capture:!0}),l.addEventListener("keydown",(function(e){"Enter"===e.key&&l.value&&e.preventDefault()})),l.addEventListener("keyup",(n=k,250,function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var c=this,l=function(){r=null,n.apply(c,t)},u=a;clearTimeout(r),r=setTimeout(l,250),u&&n.apply(c,t)})),l.addEventListener("focus",(function(){var t=e(l.value);t&&!w()&&_(t)})),u.addEventListener("click",(function(){l.value="",k(),l.focus()})),m.length>0&&m.forEach((function(e){A(e)}))}function a(t){var n=t.getAttribute("data-slug").split(","),a=document.querySelectorAll(n),r=function(){var n;t.value=(n=[],a.forEach((function(e){"end_release_year"===e.name&&e.value===n.at(-1)||n.push(e.value)})),e(n.join("-")))};Array.from(a).forEach((function(e){e.addEventListener("keyup",r)}))}document.querySelectorAll("[data-autocomplete]").forEach((function(e){t(e)})),n(8248),document.querySelectorAll("[data-confirmable]").forEach((function(e){!function(e){e.addEventListener("click",(function(t){var n,a=t.target.getAttribute("data-confirmable");n={message:a,buttons:[{label:"Cancel",class:"button--secondary"},{label:t.target.innerText,class:t.target.getAttribute("class"),onClick:function(){document.querySelector("#".concat(e.getAttribute("form"))).submit()}}]},function(){document.body.classList.add("modal-open");var e=document.createElement("dialog");e.setAttribute("class","modal"),e.setAttribute("tabindex","-1");var t=document.createElement("div");t.setAttribute("class","modal__box"),e.appendChild(t);var a=document.createElement("p");a.innerText=n.message,t.appendChild(a);var r=document.createElement("p");r.setAttribute("class","modal__options"),t.appendChild(r),n.buttons.forEach((function(t){var n=document.createElement("button");n.setAttribute("class","button ".concat(t.class).trim()),n.setAttribute("type","button"),n.innerText=t.label,n.addEventListener("click",(function(){Object.prototype.hasOwnProperty.call(t,"onClick")&&t.onClick(),e.close()})),r.appendChild(n)})),e.addEventListener("click",(function(t){"DIALOG"===t.target.tagName&&e.close()})),document.body.appendChild(e),e.showModal(),e.focus()}()}),!0)}(e)})),n(9570),document.querySelectorAll("[data-slug]").forEach((function(e){a(e)})),n(4133),n(5544)})()})();
