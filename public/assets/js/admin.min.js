/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./resources/js/admin/autocomplete.js":
/*!********************************************!*\
  !*** ./resources/js/admin/autocomplete.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utilities_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/debounce */ "./resources/js/utilities/debounce.js");
/* harmony import */ var _utilities_slugify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utilities/slugify */ "./resources/js/utilities/slugify.js");


function Autocomplete($container) {
  var url = $container.getAttribute('data-autocomplete');
  var name = $container.getAttribute('data-autocomplete-name');
  var $input = $container.querySelector('.autocomplete__input');
  var $clear = $container.querySelector('.autocomplete__clear');
  var $resultsContainer = $container.querySelector('.autocomplete__results');
  var $resultsList = $container.querySelector('.autocomplete__results-list');
  var $noResults = $container.querySelector('.autocomplete__results-none');
  var $selectedList = $container.querySelector('.autocomplete__selected-list');
  var selectedItems = window.AUTOCOMPLETE_SELECTED;
  var lastSearchTerm = '';
  var selectedIndex = null;
  var isSearching = false;
  var hideResults = function hideResults() {
    $resultsContainer.style.display = 'none';
    $resultsList.innerText = '';
  };
  var showClear = function showClear() {
    $container.classList.add('clearable');
  };
  var hideClear = function hideClear() {
    $container.classList.remove('clearable');
  };
  var removeSelectedItem = function removeSelectedItem(e) {
    var id = e.target.getAttribute('data-id');
    var $li = e.target.closest('li');
    $li.remove();
    $input.focus();
    var pos = selectedItems.findIndex(function (item) {
      return item.id === id;
    });
    if (pos > -1) {
      selectedItems.splice(pos, 1);
      if (selectedItems.length <= 0) {
        $selectedList.style.display = 'none';
      }
    }
  };
  var addSelectedItem = function addSelectedItem(item) {
    var $li = document.createElement('li');
    $li.setAttribute('class', 'autocomplete__selected-item');
    var $hiddenInput = document.createElement('input');
    $hiddenInput.setAttribute('name', "".concat(name, "[]"));
    $hiddenInput.setAttribute('type', 'hidden');
    $hiddenInput.setAttribute('value', item.id);
    $li.appendChild($hiddenInput);
    var $a = document.createElement('a');
    $a.setAttribute('class', 'autocomplete__selected-link');
    $a.setAttribute('href', item.url);
    $a.innerText = item.title;
    $li.appendChild($a);
    var $button = document.createElement('button');
    $button.setAttribute('class', 'autocomplete__selected-button');
    $button.setAttribute('data-id', item.id);
    $button.setAttribute('type', 'button');
    $button.addEventListener('click', removeSelectedItem);
    $button.innerText = 'Remove';
    $li.appendChild($button);
    $selectedList.appendChild($li);
    $selectedList.style.display = '';
    $input.value = '';
    lastSearchTerm = '';
    hideResults();
    hideClear();
  };
  var onClickResultButton = function onClickResultButton(e) {
    var $button = e.target;
    if ($button.tagName !== 'BUTTON') {
      $button = $button.closest('button');
    }
    var item = {
      id: $button.getAttribute('data-id'),
      url: $button.getAttribute('data-url'),
      title: $button.innerText
    };
    selectedItems.push(item);
    addSelectedItem(item);
    $input.focus();
  };
  var onMouseoverResultButton = function onMouseoverResultButton(e) {
    var $selectedListItem = document.querySelector('[data-selected]');
    $selectedListItem.removeAttribute('data-selected');
    var $newItem = e.target.closest('.autocomplete__results-item');
    $newItem.setAttribute('data-selected', 1);
    selectedIndex = parseInt($newItem.getAttribute('data-index'), 10);
  };
  var createResultItem = function createResultItem(i, item) {
    var $li = document.createElement('li');
    $li.setAttribute('class', 'autocomplete__results-item');
    $li.setAttribute('data-index', i);
    if (i === 0) {
      $li.setAttribute('data-selected', 1);
      selectedIndex = i;
    }
    var $button = document.createElement('button');
    $button.setAttribute('class', 'autocomplete__results-button');
    $button.setAttribute('data-id', item.id);
    $button.setAttribute('data-url', item.url);
    $button.setAttribute('type', 'button');
    $button.innerText = item.title;
    $button.addEventListener('click', onClickResultButton);
    $button.addEventListener('mouseover', onMouseoverResultButton);
    $li.appendChild($button);
    return $li;
  };
  var searchTerms = function searchTerms(term) {
    if (isSearching) {
      return;
    }
    isSearching = true;
    $container.classList.add('loading');
    fetch("".concat(url).concat(term)).then(function (response) {
      return response.json();
    }).then(function (response) {
      $container.classList.remove('loading');
      var hasResults = false;
      var i = 0;
      $resultsList.innerText = '';
      response.items.forEach(function (row) {
        // Do not show terms that have already been selected.
        var pos = selectedItems.findIndex(function (item) {
          return item.id === row.id;
        });
        if (pos > -1) {
          return;
        }
        var $li = createResultItem(i, row);
        $resultsList.appendChild($li);
        i += 1;
        hasResults = true;
      });
      $resultsContainer.style.display = '';
      if (!hasResults) {
        $noResults.style.display = '';
        $resultsList.style.display = 'none';
      } else {
        $noResults.style.display = 'none';
        $resultsList.style.display = '';
        $resultsList.firstChild.scrollIntoView({
          block: 'nearest'
        });
      }
      isSearching = false;
    });
  };
  var onKeydownTerm = function onKeydownTerm(e) {
    if (e.key === 'Enter' && $input.value) {
      e.preventDefault();
    }
  };
  var onKeyupTerm = function onKeyupTerm() {
    var value = (0,_utilities_slugify__WEBPACK_IMPORTED_MODULE_1__["default"])($input.value);
    if (value) {
      showClear();
      if (value !== lastSearchTerm) {
        lastSearchTerm = value;
        searchTerms(value);
      }
    } else {
      hideClear();
      lastSearchTerm = '';
      hideResults();
    }
  };
  var areResultsVisible = function areResultsVisible() {
    return $resultsContainer.style.display !== 'none';
  };
  var onFocusInput = function onFocusInput() {
    var value = (0,_utilities_slugify__WEBPACK_IMPORTED_MODULE_1__["default"])($input.value);
    if (value && !areResultsVisible()) {
      searchTerms(value);
    }
  };
  var onKeyup = function onKeyup(e) {
    if (!areResultsVisible()) {
      return;
    }
    var $selectedListItem = document.querySelector('[data-selected]');
    if (e.key === 'Enter') {
      if ($selectedListItem) {
        e.preventDefault();
        onClickResultButton({
          target: $selectedListItem.querySelector('button')
        });
      }
    } else if (e.key === 'ArrowDown') {
      $selectedListItem.removeAttribute('data-selected');
      if (selectedIndex >= $resultsList.querySelectorAll('li').length - 1) {
        selectedIndex = 0;
      } else {
        selectedIndex += 1;
      }
      $selectedListItem = $resultsList.querySelector("[data-index=\"".concat(selectedIndex, "\"]"));
      $selectedListItem.setAttribute('data-selected', 1);
      $selectedListItem.scrollIntoView({
        block: 'nearest'
      });
    } else if (e.key === 'ArrowUp') {
      $selectedListItem.removeAttribute('data-selected');
      if (selectedIndex > 0) {
        selectedIndex -= 1;
      } else {
        selectedIndex = $resultsList.querySelectorAll('li').length - 1;
      }
      $selectedListItem = $resultsList.querySelector("[data-index=\"".concat(selectedIndex, "\"]"));
      $selectedListItem.setAttribute('data-selected', 1);
      $selectedListItem.scrollIntoView({
        block: 'nearest'
      });
    } else if (e.key === 'Escape') {
      hideResults();
      e.stopPropagation();
    }
  };
  var onClickClear = function onClickClear() {
    $input.value = '';
    onKeyupTerm();
    $input.focus();
  };
  var init = function init() {
    document.addEventListener('keyup', onKeyup, {
      capture: true
    });
    $input.addEventListener('keydown', onKeydownTerm);
    $input.addEventListener('keyup', (0,_utilities_debounce__WEBPACK_IMPORTED_MODULE_0__["default"])(onKeyupTerm, 250));
    $input.addEventListener('focus', onFocusInput);
    $clear.addEventListener('click', onClickClear);
    if (selectedItems.length > 0) {
      selectedItems.forEach(function (item) {
        addSelectedItem(item);
      });
    }
  };
  init();
}
function initAutocomplete() {
  var $elements = document.querySelectorAll('[data-autocomplete]');
  $elements.forEach(function ($element) {
    Autocomplete($element);
  });
}
initAutocomplete();

/***/ }),

/***/ "./resources/js/admin/beforeunload.js":
/*!********************************************!*\
  !*** ./resources/js/admin/beforeunload.js ***!
  \********************************************/
/***/ (() => {

function onBeforeUnload(e) {
  e.preventDefault();
  return e.returnValue = 'You have unsaved changes. Are you sure you want to leave the page?'; // eslint-disable-line no-return-assign
}

function addUnloadListener() {
  window.addEventListener('beforeunload', onBeforeUnload, {
    capture: true
  });
}
function removeUnloadListener() {
  window.removeEventListener('beforeunload', onBeforeUnload, {
    capture: true
  });
}
function initBeforeUnload() {
  var $form = document.getElementById('form');
  if ($form) {
    var $inputs = $form.querySelectorAll('input,select,textarea');
    $inputs.forEach(function ($input) {
      $input.addEventListener('keyup', addUnloadListener);
      $input.addEventListener('change', addUnloadListener);
    });
    $form.addEventListener('submit', removeUnloadListener);
  }
}
initBeforeUnload();

/***/ }),

/***/ "./resources/js/admin/confirmable.js":
/*!*******************************************!*\
  !*** ./resources/js/admin/confirmable.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _modal__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modal */ "./resources/js/admin/modal.js");

function Confirmable($button) {
  var onClick = function onClick(e) {
    var message = e.target.getAttribute('data-confirmable');
    (0,_modal__WEBPACK_IMPORTED_MODULE_0__["default"])({
      message: message,
      buttons: [{
        label: 'Cancel',
        "class": 'button--secondary'
      }, {
        label: e.target.innerText,
        "class": e.target.getAttribute('class'),
        onClick: function onClick() {
          document.querySelector("#".concat($button.getAttribute('form'))).submit();
        }
      }]
    });
  };
  var init = function init() {
    $button.addEventListener('click', onClick, true);
  };
  init();
}
function initConfirmable() {
  var $elements = document.querySelectorAll('[data-confirmable]');
  $elements.forEach(function ($element) {
    Confirmable($element);
  });
}
initConfirmable();

/***/ }),

/***/ "./resources/js/admin/menu.js":
/*!************************************!*\
  !*** ./resources/js/admin/menu.js ***!
  \************************************/
/***/ (() => {

function Menu() {
  var $body = document.body;
  var $menuButton = document.getElementById('menu-button');
  var isMenuVisible = function isMenuVisible() {
    return $body.classList.contains('open-menu');
  };
  var closeMenu = function closeMenu() {
    $body.classList.remove('open-menu');
  };
  var openMenu = function openMenu() {
    $body.classList.add('open-menu');
  };
  var toggleMenu = function toggleMenu() {
    if (isMenuVisible()) {
      closeMenu();
    } else {
      openMenu();
    }
  };
  var onDocumentKeyup = function onDocumentKeyup(e) {
    if (e.key === 'Escape') {
      closeMenu();
    }
  };
  this.init = function () {
    if ($menuButton) {
      $menuButton.addEventListener('click', toggleMenu);
      document.addEventListener('keyup', onDocumentKeyup);
    }
  };
}
new Menu().init();

/***/ }),

/***/ "./resources/js/admin/modal.js":
/*!*************************************!*\
  !*** ./resources/js/admin/modal.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Modal)
/* harmony export */ });
function Modal(args) {
  var show = function show() {
    document.body.classList.add('modal-open');
    var $dialog = document.createElement('dialog');
    $dialog.setAttribute('class', 'modal');
    $dialog.setAttribute('tabindex', '-1');
    var $box = document.createElement('div');
    $box.setAttribute('class', 'modal__box');
    $dialog.appendChild($box);
    var $p = document.createElement('p');
    $p.innerText = args.message;
    $box.appendChild($p);
    var $options = document.createElement('p');
    $options.setAttribute('class', 'modal__options');
    $box.appendChild($options);
    args.buttons.forEach(function (data) {
      var $button = document.createElement('button');
      $button.setAttribute('class', "button ".concat(data["class"]).trim());
      $button.setAttribute('type', 'button');
      $button.innerText = data.label;
      $button.addEventListener('click', function () {
        if (Object.prototype.hasOwnProperty.call(data, 'onClick')) {
          data.onClick();
        }
        $dialog.close();
      });
      $options.appendChild($button);
    });
    $dialog.addEventListener('click', function (e) {
      if (e.target.tagName === 'DIALOG') {
        $dialog.close();
      }
    });
    document.body.appendChild($dialog);
    $dialog.showModal();
    $dialog.focus();
  };
  show();
}

/***/ }),

/***/ "./resources/js/admin/slugable.js":
/*!****************************************!*\
  !*** ./resources/js/admin/slugable.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utilities_slugify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utilities/slugify */ "./resources/js/utilities/slugify.js");

function Slugable($slugInput) {
  var inputSelectors = $slugInput.getAttribute('data-slug').split(',');
  var $inputs = document.querySelectorAll(inputSelectors);
  var toSlug = function toSlug() {
    var values = [];
    $inputs.forEach(function ($input) {
      if ($input.name === 'end_release_year' && $input.value === values.at(-1)) {
        return;
      }
      values.push($input.value);
    });
    return (0,_utilities_slugify__WEBPACK_IMPORTED_MODULE_0__["default"])(values.join('-'));
  };
  var onChangeInput = function onChangeInput() {
    $slugInput.value = toSlug();
  };
  var init = function init() {
    Array.from($inputs).forEach(function ($input) {
      $input.addEventListener('keyup', onChangeInput);
    });
  };
  init();
}
function initSlugable() {
  var $elements = document.querySelectorAll('[data-slug]');
  $elements.forEach(function ($element) {
    Slugable($element);
  });
}
initSlugable();

/***/ }),

/***/ "./resources/js/admin/today.js":
/*!*************************************!*\
  !*** ./resources/js/admin/today.js ***!
  \*************************************/
/***/ (() => {

function pad(n) {
  var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
  var z = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '0';
  z = z || '0';
  n = n.toString();
  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
}
function setToday() {
  var date = new Date();
  var ymd = "".concat(date.getFullYear(), "-").concat(pad(date.getMonth() + 1), "-").concat(pad(date.getDate()));
  document.getElementById('start_date').value = ymd;
}
function initToday() {
  var $elem = document.querySelector('[data-action="today"]');
  if ($elem) {
    $elem.addEventListener('click', setToday);
  }
}
initToday();

/***/ }),

/***/ "./resources/js/admin/type.js":
/*!************************************!*\
  !*** ./resources/js/admin/type.js ***!
  \************************************/
/***/ (() => {

function showHideByType() {
  var val = document.getElementById('type').value;
  var $elements = document.querySelectorAll('[data-show-for-type]');
  $elements.forEach(function ($element) {
    if ($element.getAttribute('data-show-for-type').split(',').includes(val)) {
      $element.style.display = '';
    } else {
      $element.style.display = 'none';
    }
  });
}
function initShowForType() {
  var $type = document.getElementById('type');
  if ($type) {
    $type.addEventListener('change', showHideByType);
    showHideByType();
  }
}
initShowForType();

/***/ }),

/***/ "./resources/js/utilities/debounce.js":
/*!********************************************!*\
  !*** ./resources/js/utilities/debounce.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
// https://davidwalsh.name/javascript-debounce-function
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (function (func, wait, immediate) {
  var timeout;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    // eslint-disable-line func-names
    var context = this;
    var later = function later() {
      timeout = null;
      if (!immediate) {
        func.apply(context, args);
      }
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) {
      func.apply(context, args);
    }
  };
});

/***/ }),

/***/ "./resources/js/utilities/slugify.js":
/*!*******************************************!*\
  !*** ./resources/js/utilities/slugify.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (function (value) {
  if (!value) {
    return '';
  }
  return value.toLowerCase().replace(/ & /g, '-and-').replace(/<[^>]+>/g, '').replace(/['’.]/g, '').replace(/[^a-z0-9-]+/g, '-').replace(/^-+/, '').replace(/-+$/, '').replace(/--+/g, '-');
});

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*******************************!*\
  !*** ./resources/js/admin.js ***!
  \*******************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _admin_autocomplete__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./admin/autocomplete */ "./resources/js/admin/autocomplete.js");
/* harmony import */ var _admin_beforeunload__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./admin/beforeunload */ "./resources/js/admin/beforeunload.js");
/* harmony import */ var _admin_beforeunload__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_admin_beforeunload__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _admin_confirmable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./admin/confirmable */ "./resources/js/admin/confirmable.js");
/* harmony import */ var _admin_menu__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./admin/menu */ "./resources/js/admin/menu.js");
/* harmony import */ var _admin_menu__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_admin_menu__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _admin_slugable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./admin/slugable */ "./resources/js/admin/slugable.js");
/* harmony import */ var _admin_today__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./admin/today */ "./resources/js/admin/today.js");
/* harmony import */ var _admin_today__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_admin_today__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _admin_type__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./admin/type */ "./resources/js/admin/type.js");
/* harmony import */ var _admin_type__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_admin_type__WEBPACK_IMPORTED_MODULE_6__);







})();

/******/ })()
;